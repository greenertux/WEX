<!-- Last modified 07/12/2015 by greenertux (Tristan Hoffmann)
This xslt can be used to convert the output generated by the builtin WCA Annotations converter (tested in WEX 10.0.0.2) to a more usable format

To use this, create a new custom converter with input and output types application/vxml-unnormalized and paste this code into the xsl section.
-->

<xsl:template match="/">
  <vce>
    <xsl:for-each select="//document">
      <document>
        <xsl:for-each select="./content">
          <xsl:text disable-output-escaping="yes"><![CDATA[<content name="]]></xsl:text>
          <xsl:value-of select="@name" />
          <xsl:text disable-output-escaping="yes"><![CDATA[">]]></xsl:text>
          <xsl:value-of select="." />
          <xsl:text disable-output-escaping="yes"><![CDATA[</content>]]></xsl:text>
        </xsl:for-each>
        <xsl:for-each select="./Metadata/Facets/Facet">
          <!-- combine value of Path nodes to form content name -->
          <xsl:text disable-output-escaping="yes"><![CDATA[<content name="]]></xsl:text>
          <xsl:value-of select="./Path[1]" /><![CDATA[_]]><xsl:value-of select="./Path[2]" />
          <xsl:text disable-output-escaping="yes"><![CDATA[">]]></xsl:text>
          <!-- select value of Keyword node as content value -->
          <xsl:value-of select="./Keyword" />
          <xsl:text disable-output-escaping="yes"><![CDATA[</content>]]></xsl:text>
        </xsl:for-each>
      </document>
    </xsl:for-each>
  </vce>
</xsl:template> 
